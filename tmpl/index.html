<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<script src="/static/jquery.js"></script>
	<script src="/static/imgLoader.js"></script>
	<style>
		body {
			display: flex;
			align-items: center;
			background: #333;
			flex-direction: column;
			min-height: 100vh;
			justify-content: center;
			font-family: "Jetbrains Mono", -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif
		}
		.grid {
			column-count: 4;
			column-gap: 0.5em;
		}

		.item {
			display: inline-block;
			margin-bottom: 0.25em;
			width: 100%;
		}

		.loading {
			align-self: center;
		}
	</style>
</head>

<body>
	<div class="loading">LOADING...</div>
	<section class="grid">
		{{range .Images}}
		<img class="item" src="/images/{{.}}"></img>
		{{end}}
	</section>
</body>


	<script>
		var els = { 
			loading: document.querySelector(".loading"),
			grid: document.querySelector(".grid")
		}
		els.grid.style.display = "none";
		var imagesLoaded = false;

		$('#grid').imagesLoaded()
			.always(function (instance) {
			})
			.done(function (instance) {
				imagesLoaded = true
				// setTimeout(() => {
					els.grid.style.display = "block"
					els.loading.style.display = "none";
				// }, 500)
				console.log('all images successfully loaded');
			})
			.fail(function () {
				console.log('all images loaded, at least one is broken');
			})
	</script>

</html>